#summary Automatic deployment of DB schema
#labels Phase-Design

= Usage sample =

You create a file `application/deploy/straight/user.sql`:

{{{
CREATE TABLE IF NOT EXISTS `user` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT "Unique ID of the user",
  `email` VARBINARY(200) NOT NULL COMMENT "Unique user email",
  `password` VARBINARY(50) NOT NULL COMMENT "User password",
  PRIMARY KEY USING BTREE (`id`),
  UNIQUE (`email`)
  ) AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 ENGINE=InnoDB;
}}}

Then you do this:

{{{
$user = FaZend_Db_Table_ActiveRow_user::findById(13);
}}}

For every new revision the following operations will be peformed:

 # An instance of class `FaZend_Db_Deploy_Abstract` will be created (`$deploy`)
 # `$deploy->deploy()` will be called
 # If the table description in file and in Db are different:
  * `FaZend_Db_Deploy_Straight`: `DROP` table in DB and create a new one
  * `FaZend_Db_Deploy_Alter`: try to `ALTER` the table in DB, if failure - email to admin
 # Email notification to admin with results of deployment